======== Memory Architecture ========


┌──────────────────────────────────────────────┐
│              Agent                          │
└──────────────┬──────────────────────────────┘
               v
┌──────────────────────────────────────────────┐
│ Layer 1: Query Cache (coarse, fast)          │
│  - 1 vector per query                        │
│  - payload = doc_ids + score + metadata     │
│  - TTL + LRU                                │
│  - used for early exit                      │
└──────────────┬──────────────────────────────┘
        hit?   │ yes
               v
        return cached result
               │
               no
               v
┌──────────────────────────────────────────────┐
│ Layer 2: Chunk Store (fine-grained)          │
│  - chunk article text                       │
│  - embed each chunk                         │
│  - store (chunk_text, doc_id, section)      │
│  - semantic search over chunks              │
└──────────────┬──────────────────────────────┘
               v
┌──────────────────────────────────────────────┐
│ Context Builder                             │
│  - take top-k chunks                        │
│  - expand window (prev/next chunks)         │
│  - group by document                        │
└──────────────┬──────────────────────────────┘
               v
        answer / score / cache query result
